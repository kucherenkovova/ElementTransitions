/* elementTransitions
https://github.com/soixantecircuits/ElementTransitions.js %> */

var ElementTransitions=function(){function a(a){k.animationEndEventName=e(),k.supportedEvents=["click","touchend"],k.afterAnimation=a;for(var d=document.querySelectorAll(".et-block"),f=0;f<d.length;f++)b(d[f]);for(var g=document.querySelectorAll(".et-wrapper"),f=0;f<g.length;f++){var i=g[f];i.loop=i.getAttribute("et-loop")||!0,i.multiTrigger=i.getAttribute("et-multi-trigger")||!1,i.noTrigger=i.getAttribute("et-no-trigger")||!1,i.dataset.current=0,i.specialAnim=i.getAttribute("et-special")||!1,h(i.querySelectorAll(".et-block")[i.dataset.current],"et-block-current"),i.dataset.isAnimating=!1;var j=document.querySelectorAll(i.getAttribute("et-trigger-selector"));j.length||(j=i.className.indexOf("et-trigger")>-1?i:i.querySelector(".et-trigger")),c(j,i)}}function b(a){a.dataset.originalClassList=a.className}function c(a,b){if(b.noTrigger){a="true"==b.multiTrigger?a:[a];for(var c=0;c<a.length;c++){var e=a[c];g(e,k.supportedEvents,function(a){e=a.target,a.preventDefault(),d(b,e)})}}}function d(a,b){var c=b.getAttribute("et-step")||1,d=a.querySelectorAll(".et-block"),e=a.dataset.current,g=d[e],i="true"==b.getAttribute("et-reverse"),j=null;if(g){if(j=i?0>+e-+c:+e+ +c>d.length-1,"true"==a.dataset.isAnimating||j&&"false"==a.loop)return!1;a.dataset.isAnimating=!0;var l=b.getAttribute("et-out")?b.getAttribute("et-out"):a.getAttribute("et-out"),m=b.getAttribute("et-in")?b.getAttribute("et-in"):a.getAttribute("et-in");l&&m||console.error("elementTransitions.js - No `et-out` or `et-in` attribute specified.");for(var n=f(l),o=f(m),p=0;p<n.length;p++)h(g,n[p]);var q=g;e=i?j?+e-+c+d.length:+e-+c:j?+e+ +c-d.length:+e+ +c,a.dataset.current=e,g=d[e];for(var p=0;p<o.length;p++)h(g,o[p]),h(g,"et-block-current");g.addEventListener(k.animationEndEventName,function(b){g.removeEventListener(k.animationEndEventName,arguments.callee),q.className=q.dataset.originalClassList,g.className=g.dataset.originalClassList+" et-block-current",a.dataset.isAnimating=!1,"function"==typeof k.afterAnimation&&k.afterAnimation(q,g)})}}function e(){var a="Animation",b={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"};if("string"==typeof document.body.style[a])return b[a.toLowerCase()];for(var c=["Moz","Webkit","Khtml","O","ms"],d=0;d<c.length;d++)if("string"==typeof document.body.style[c[d]+a])return b[c[d]+a];return!1}function f(a){for(var b=[],c=a.split(/\s/),d=0;d<c.length;d++)b.push("et-"+c[d]);return b}function g(a,b,c){for(var d=0;d<b.length;d++)a.addEventListener(b[d],function(a){c(a)})}function h(a,b){var c=new RegExp(b,"gi");a.className=a.className.indexOf(b)>-1?a.className.replace(c,""):a.className+" "+b}function i(a){return a=a.length?a[0]:a,a.dataset.isAnimating}function j(a){a=a.length?a[0]:a,a.dataset.current=0}var k=this;return{init:a,animate:d,initializeBlock:b,isAnimating:i,resetCurrent:j}};module.exports=ElementTransitions();